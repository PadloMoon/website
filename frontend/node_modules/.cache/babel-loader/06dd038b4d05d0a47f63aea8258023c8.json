{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DefaultValueProducer = void 0; // allows pre-producing values before anyone is listening\n\nclass DefaultValueProducer {\n  constructor(value, callbacks) {\n    this.callbacks = callbacks;\n    this.internalValue = value;\n  }\n\n  get value() {\n    return this.internalValue;\n  }\n  /**\n   * Update the current value.\n   *\n   * If producer is active (i.e. someone is listening), this emits an event.\n   * If not, just the current value is updated.\n   */\n\n\n  update(value) {\n    this.internalValue = value;\n\n    if (this.listener) {\n      this.listener.next(value);\n    }\n  }\n  /**\n   * Produce an error\n   */\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\n\n  error(error) {\n    if (this.listener) {\n      this.listener.error(error);\n    }\n  }\n  /**\n   * Called by the stream. Do not call this directly.\n   */\n\n\n  start(listener) {\n    this.listener = listener;\n    listener.next(this.internalValue);\n\n    if (this.callbacks) {\n      this.callbacks.onStarted();\n    }\n  }\n  /**\n   * Called by the stream. Do not call this directly.\n   */\n\n\n  stop() {\n    if (this.callbacks) {\n      this.callbacks.onStop();\n    }\n\n    this.listener = undefined;\n  }\n\n}\n\nexports.DefaultValueProducer = DefaultValueProducer;","map":{"version":3,"mappings":";;;;;uCAOA;;AACA,MAAaA,oBAAb,CAAiC;AAS/BC,cAAmBC,KAAnB,EAA6BC,SAA7B,EAAuE;AACrE,SAAKA,SAAL,GAAiBA,SAAjB;AACA,SAAKC,aAAL,GAAqBF,KAArB;AACD;;AAXe,MAALA,KAAK;AACd,WAAO,KAAKE,aAAZ;AACD;AAWD;;;;;;;;AAMOC,QAAM,CAACH,KAAD,EAAS;AACpB,SAAKE,aAAL,GAAqBF,KAArB;;AACA,QAAI,KAAKI,QAAT,EAAmB;AACjB,WAAKA,QAAL,CAAcC,IAAd,CAAmBL,KAAnB;AACD;AACF;AAED;;;AAGA;;;AACOM,OAAK,CAACA,KAAD,EAAW;AACrB,QAAI,KAAKF,QAAT,EAAmB;AACjB,WAAKA,QAAL,CAAcE,KAAd,CAAoBA,KAApB;AACD;AACF;AAED;;;;;AAGOC,OAAK,CAACH,QAAD,EAAsB;AAChC,SAAKA,QAAL,GAAgBA,QAAhB;AACAA,YAAQ,CAACC,IAAT,CAAc,KAAKH,aAAnB;;AAEA,QAAI,KAAKD,SAAT,EAAoB;AAClB,WAAKA,SAAL,CAAeO,SAAf;AACD;AACF;AAED;;;;;AAGOC,MAAI;AACT,QAAI,KAAKR,SAAT,EAAoB;AAClB,WAAKA,SAAL,CAAeS,MAAf;AACD;;AACD,SAAKN,QAAL,GAAgBO,SAAhB;AACD;;AAzD8B;;AAAjCC","names":["DefaultValueProducer","constructor","value","callbacks","internalValue","update","listener","next","error","start","onStarted","stop","onStop","undefined","exports"],"sourceRoot":"","sources":["../src/defaultvalueproducer.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}