{"ast":null,"code":"var _jsxFileName = \"/home/vanka/dev/padlomoon/frontend/src/routes/PokerRegistration/PokerRegistration.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport classNames from \"classnames\";\nimport { Button, Col, Container, Row, Form, Modal, Spinner } from \"react-bootstrap\";\nimport Navigation from \"../../components/Navigation/Navigation\";\nimport Footer from \"../../components/Footer/Footer\";\nimport WalletConnect from \"../../components/WalletConnect/WalletConnect\";\nimport { useAppDispatch, useAppSelector } from \"../../slices/hooks\";\nimport { defaultWallet } from \"../../slices/interfaces\";\nimport { setRefreshing, updateWallet } from \"../../slices/walletSlice\";\nimport { wait } from \"../../utils/utils\";\nimport { payWithMetamask } from \"../../utils/transactions\";\nimport styles from \"./PokerRegistration.module.css\";\nimport mainStyles from \"../../styles/main.module.css\";\nimport { sendRegistrationEmail } from \"../../utils/sendRegistrationEmail\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst REGISTRATION_FEE = 60;\nconst PADLO_FEE = 6;\nconst POKERCLUB_URL = \"https://www.pokernow.club/mtt/cronos-poker-night-4-GICfoTRwyA\";\n\nconst PokerRegistration = () => {\n  _s();\n\n  const [showWalletConnect, setShowWalletConnect] = useState(false);\n  const [showRegistrationModal, setShowRegistrationModal] = useState(false);\n  const [validated, setValidated] = useState(false);\n  const [error, setError] = useState(false);\n  const dispatch = useAppDispatch();\n  const refreshing = useAppSelector(state => state.wallet.refreshing);\n  const wallet = useAppSelector(state => state.wallet.wallet);\n  const processing = useAppSelector(state => state.transaction.processing);\n\n  const toggleWalletConnect = () => setShowWalletConnect(!showWalletConnect);\n\n  const toggleRegistrationModal = () => setShowRegistrationModal(!showRegistrationModal);\n\n  const disconnect = async () => {\n    dispatch(setRefreshing({\n      status: true,\n      message: \"Disconnecting\"\n    }));\n    dispatch(updateWallet(defaultWallet));\n    await wait(1000);\n    dispatch(setRefreshing({\n      status: false,\n      message: \"Completed\"\n    }));\n  };\n\n  const getWalletState = () => {\n    if (refreshing.status) {\n      return \"loading\";\n    }\n\n    if (wallet.address.length) {\n      return \"connected\";\n    }\n\n    return \"disconnected\";\n  };\n\n  const getWalletButtonTitle = state => {\n    switch (state) {\n      case \"loading\":\n        return refreshing.message;\n\n      case \"connected\":\n        return \"Disconnect\";\n\n      case \"disconnected\":\n        return \"Connect wallet\";\n\n      default:\n        return \"Connect wallet\";\n    }\n  };\n\n  const handleSubmit = async event => {\n    const form = event.currentTarget;\n    event.preventDefault();\n\n    if (form.checkValidity() === false) {\n      event.stopPropagation();\n      return;\n    }\n\n    toggleRegistrationModal();\n    const txRes = await payWithMetamask(wallet.address);\n\n    if (txRes) {\n      const emailRes = await sendRegistrationEmail(event.target.username.value, txRes);\n\n      if (!emailRes) {\n        setError(true);\n      }\n    } else {\n      setError(true);\n    }\n\n    event.target.username.value = \"\";\n    setValidated(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Container, {\n      fluid: \"lg\",\n      className: mainStyles.Container,\n      children: [/*#__PURE__*/_jsxDEV(Navigation, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          style: {\n            display: \"flex\",\n            justifyContent: \"flex-end\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            disabled: refreshing.status,\n            size: \"lg\",\n            className: classNames(mainStyles.ButtonSecondary, styles.ConnectWalletButton),\n            onClick: getWalletState() !== \"connected\" ? toggleWalletConnect : disconnect,\n            active: true,\n            children: getWalletButtonTitle(getWalletState())\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          xs: 11,\n          md: 10,\n          lg: 8,\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: classNames(mainStyles.Title, mainStyles.CommonElement),\n            children: \"Register for Padlo's Poker Tournament!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          lg: \"10\",\n          className: classNames(mainStyles.CommonElement, styles.Registration),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"First, register to Poker at\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n                className: mainStyles.Link,\n                target: \"_blank\",\n                rel: \"noreferrer\",\n                href: POKERCLUB_URL,\n                children: \"Pokernow.club\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 17\n              }, this), \". Then fill in your name, connect your wallet and hit register button. Use the same name as in pokernow.club.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Registration fee is\", \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: `${REGISTRATION_FEE} + ${PADLO_FEE} CRO`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form, {\n              noValidate: true,\n              validated: validated,\n              onSubmit: handleSubmit,\n              children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n                controlId: \"formUsername\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n                  className: styles.Input,\n                  required: true,\n                  type: \"text\",\n                  placeholder: \"Enter username\",\n                  name: \"username\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n                  type: \"invalid\",\n                  children: \"Please enter a username\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                className: classNames(mainStyles.Button, styles.SubmitButton),\n                disabled: !wallet.connected,\n                type: \"submit\",\n                children: processing ? \"Processing\" : \"Register\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(WalletConnect, {\n      show: showWalletConnect,\n      handleClose: toggleWalletConnect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showRegistrationModal,\n      onHide: toggleRegistrationModal,\n      backdrop: \"static\",\n      keyboard: false,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Registering to poker\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: processing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Spinner, {\n            animation: \"border\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 15\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontWeight: \"bold\",\n              fontSize: \"1.1rem\",\n              marginLeft: \"2rem\"\n            },\n            children: \"Processing your registration\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : error ? \"Something went wrong with your registration. Check your transaction and if it was completed, contact admin@padlomoon.com\" : \"Registration was completed! Thank you and see you on the table!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          disabled: processing,\n          onClick: toggleRegistrationModal,\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(PokerRegistration, \"qzPZTX5PzLeRowEW5ycT9O0gzBw=\", false, function () {\n  return [useAppDispatch, useAppSelector, useAppSelector, useAppSelector];\n});\n\n_c = PokerRegistration;\nexport default PokerRegistration;\n\nvar _c;\n\n$RefreshReg$(_c, \"PokerRegistration\");","map":{"version":3,"sources":["/home/vanka/dev/padlomoon/frontend/src/routes/PokerRegistration/PokerRegistration.tsx"],"names":["React","useState","classNames","Button","Col","Container","Row","Form","Modal","Spinner","Navigation","Footer","WalletConnect","useAppDispatch","useAppSelector","defaultWallet","setRefreshing","updateWallet","wait","payWithMetamask","styles","mainStyles","sendRegistrationEmail","REGISTRATION_FEE","PADLO_FEE","POKERCLUB_URL","PokerRegistration","showWalletConnect","setShowWalletConnect","showRegistrationModal","setShowRegistrationModal","validated","setValidated","error","setError","dispatch","refreshing","state","wallet","processing","transaction","toggleWalletConnect","toggleRegistrationModal","disconnect","status","message","getWalletState","address","length","getWalletButtonTitle","handleSubmit","event","form","currentTarget","preventDefault","checkValidity","stopPropagation","txRes","emailRes","target","username","value","display","justifyContent","ButtonSecondary","ConnectWalletButton","Title","CommonElement","Registration","Link","Input","SubmitButton","connected","fontWeight","fontSize","marginLeft"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport classNames from \"classnames\";\n\nimport {\n  Button,\n  Col,\n  Container,\n  Row,\n  Form,\n  Modal,\n  Spinner,\n} from \"react-bootstrap\";\n\nimport Navigation from \"../../components/Navigation/Navigation\";\nimport Footer from \"../../components/Footer/Footer\";\nimport WalletConnect from \"../../components/WalletConnect/WalletConnect\";\n\nimport { useAppDispatch, useAppSelector } from \"../../slices/hooks\";\nimport { defaultWallet } from \"../../slices/interfaces\";\nimport { setRefreshing, updateWallet } from \"../../slices/walletSlice\";\nimport { wait } from \"../../utils/utils\";\nimport { payWithMetamask } from \"../../utils/transactions\";\n\nimport styles from \"./PokerRegistration.module.css\";\nimport mainStyles from \"../../styles/main.module.css\";\nimport { sendRegistrationEmail } from \"../../utils/sendRegistrationEmail\";\n\ntype WalletState = \"connected\" | \"loading\" | \"disconnected\";\n\nconst REGISTRATION_FEE = 60;\nconst PADLO_FEE = 6;\nconst POKERCLUB_URL =\n  \"https://www.pokernow.club/mtt/cronos-poker-night-4-GICfoTRwyA\";\n\nconst PokerRegistration = () => {\n  const [showWalletConnect, setShowWalletConnect] = useState(false);\n  const [showRegistrationModal, setShowRegistrationModal] = useState(false);\n  const [validated, setValidated] = useState(false);\n  const [error, setError] = useState(false);\n\n  const dispatch = useAppDispatch();\n  const refreshing = useAppSelector((state) => state.wallet.refreshing);\n  const wallet = useAppSelector((state) => state.wallet.wallet);\n  const processing = useAppSelector((state) => state.transaction.processing);\n\n  const toggleWalletConnect = () => setShowWalletConnect(!showWalletConnect);\n\n  const toggleRegistrationModal = () =>\n    setShowRegistrationModal(!showRegistrationModal);\n\n  const disconnect = async () => {\n    dispatch(setRefreshing({ status: true, message: \"Disconnecting\" }));\n    dispatch(updateWallet(defaultWallet));\n    await wait(1000);\n    dispatch(setRefreshing({ status: false, message: \"Completed\" }));\n  };\n\n  const getWalletState = (): WalletState => {\n    if (refreshing.status) {\n      return \"loading\";\n    }\n    if (wallet.address.length) {\n      return \"connected\";\n    }\n    return \"disconnected\";\n  };\n\n  const getWalletButtonTitle = (state: WalletState): string => {\n    switch (state) {\n      case \"loading\":\n        return refreshing.message;\n      case \"connected\":\n        return \"Disconnect\";\n      case \"disconnected\":\n        return \"Connect wallet\";\n      default:\n        return \"Connect wallet\";\n    }\n  };\n\n  const handleSubmit = async (event: any) => {\n    const form = event.currentTarget;\n    event.preventDefault();\n    if (form.checkValidity() === false) {\n      event.stopPropagation();\n      return;\n    }\n    toggleRegistrationModal();\n    const txRes = await payWithMetamask(wallet.address);\n    if (txRes) {\n      const emailRes = await sendRegistrationEmail(\n        event.target.username.value,\n        txRes\n      );\n      if (!emailRes) {\n        setError(true);\n      }\n    } else {\n      setError(true);\n    }\n    event.target.username.value = \"\";\n    setValidated(true);\n  };\n\n  return (\n    <>\n      <Container fluid=\"lg\" className={mainStyles.Container}>\n        <Navigation />\n        <Row>\n          <Col style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n            <Button\n              disabled={refreshing.status}\n              size=\"lg\"\n              className={classNames(\n                mainStyles.ButtonSecondary,\n                styles.ConnectWalletButton\n              )}\n              onClick={\n                getWalletState() !== \"connected\"\n                  ? toggleWalletConnect\n                  : disconnect\n              }\n              active\n            >\n              {getWalletButtonTitle(getWalletState())}\n            </Button>\n          </Col>\n        </Row>\n        <Row className=\"justify-content-center\">\n          <Col xs={11} md={10} lg={8}>\n            <h1\n              className={classNames(mainStyles.Title, mainStyles.CommonElement)}\n            >\n              Register for Padlo's Poker Tournament!\n            </h1>\n          </Col>\n        </Row>\n        <Row className=\"justify-content-center\">\n          <Col\n            lg=\"10\"\n            className={classNames(\n              mainStyles.CommonElement,\n              styles.Registration\n            )}\n          >\n            <div>\n              <p>\n                First, register to Poker at{\" \"}\n                <a\n                  className={mainStyles.Link}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                  href={POKERCLUB_URL}\n                >\n                  Pokernow.club\n                </a>\n                . Then fill in your name, connect your wallet and hit register\n                button. Use the same name as in pokernow.club.\n              </p>\n              <p>\n                Registration fee is{\" \"}\n                <strong>{`${REGISTRATION_FEE} + ${PADLO_FEE} CRO`}</strong>\n              </p>\n              <Form noValidate validated={validated} onSubmit={handleSubmit}>\n                <Form.Group controlId=\"formUsername\">\n                  <Form.Control\n                    className={styles.Input}\n                    required\n                    type=\"text\"\n                    placeholder=\"Enter username\"\n                    name=\"username\"\n                  />\n                  <Form.Control.Feedback type=\"invalid\">\n                    Please enter a username\n                  </Form.Control.Feedback>\n                </Form.Group>\n                <Button\n                  className={classNames(mainStyles.Button, styles.SubmitButton)}\n                  disabled={!wallet.connected}\n                  type=\"submit\"\n                >\n                  {processing ? \"Processing\" : \"Register\"}\n                </Button>\n              </Form>\n            </div>\n          </Col>\n        </Row>\n      </Container>\n      <WalletConnect\n        show={showWalletConnect}\n        handleClose={toggleWalletConnect}\n      />\n      <Footer />\n      <Modal\n        show={showRegistrationModal}\n        onHide={toggleRegistrationModal}\n        backdrop=\"static\"\n        keyboard={false}\n      >\n        <Modal.Header closeButton>\n          <Modal.Title>Registering to poker</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          {processing ? (\n            <>\n              <Spinner animation=\"border\" />{\" \"}\n              <span\n                style={{\n                  fontWeight: \"bold\",\n                  fontSize: \"1.1rem\",\n                  marginLeft: \"2rem\",\n                }}\n              >\n                Processing your registration\n              </span>\n            </>\n          ) : error ? (\n            \"Something went wrong with your registration. Check your transaction and if it was completed, contact admin@padlomoon.com\"\n          ) : (\n            \"Registration was completed! Thank you and see you on the table!\"\n          )}\n        </Modal.Body>\n        <Modal.Footer>\n          <Button disabled={processing} onClick={toggleRegistrationModal}>\n            Close\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </>\n  );\n};\n\nexport default PokerRegistration;\n"]},"metadata":{},"sourceType":"module"}